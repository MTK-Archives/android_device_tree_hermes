From 37f20e45e126929c8273f3d6b0c5b20d9e8ba7f9 Mon Sep 17 00:00:00 2001
From: Aaron Kling <webgeek1234@gmail.com>
Date: Thu, 17 Nov 2016 15:53:03 -0600
Subject: [PATCH] zygote: Allow device to append extra whitelisted paths

Since this was approved for cm-13.0, it needs put back in here.

Change-Id: Ibbffdced9ee86370821e4c8766a8dc9fe6a6af99
---
 core/jni/fd_utils.cpp         |  5 +++++
 1 file changed, 5 insertions(+)

diff --git a/core/jni/fd_utils.cpp b/core/jni/fd_utils.cpp
index 92a542676bc..d8519f4d734 100644
--- a/core/jni/fd_utils.cpp
+++ b/core/jni/fd_utils.cpp
@@ -31,6 +31,8 @@
 #include <android-base/stringprintf.h>
 #include <android-base/strings.h>
 
+// whitelist ged
+
 // Static whitelist of open paths that the zygote is allowed to keep open.
 static const char* kPathWhitelist[] = {
   "/dev/null",
@@ -43,6 +45,9 @@ static const char* kPathWhitelist[] = {
   "/dev/ion",
   "/dev/dri/renderD129", // Fixes b/31172436
   "/system/framework/org.lineageos.platform-res.apk",
+   "/proc/ged",
+   "/proc/apid",
+   "/proc/aprf",
 };
 
 static const char kFdPath[] = "/proc/self/fd";
-- 
2.11.0

